---
title: "species filters for NiN/biotope classification analyses - R Notebook"
output: html_notebook
authors: Rebecca Ross and Genoveva Gonzales-Mirelis
---

This script assumes that MarVid data has passed through the rStation and sample filters already, and will now undergo species filters that are common between NiN/biotope analyses. Some additional filters may only be applied on an analysis-specific basis - these are found within the analyses projects themselves (e.g. deepseaNiN or twinspanBiotopes).


# Inputs
- Assumes have run config and stationFilters scripts already.
- Needs Taxonary

Currently using a temporary wide species_densities based object as input, when ready will replace with object generated in previous step (stationFilters)


```{r}
#temporary code to make working object

wideData <- sppdens %>% select(-c(TotAbu_pseudocount)) %>%
  mutate(clean_taxonomy = gsub(" ","_",clean_taxonomy)) %>%
  mutate(clean_taxonomy = gsub("\\..*","",clean_taxonomy, fixed=FALSE)) %>%#removes whats after the ;
  mutate(clean_taxonomy = tolower(clean_taxonomy)) %>%
  pivot_wider(names_from = clean_taxonomy, values_from = density_n100m2, values_fill = 0, values_fn = sum)

head(wideData)

```

